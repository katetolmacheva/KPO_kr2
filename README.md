# KR2 Антиплагиат-сервис 
## Описание проекта
Данный проект — веб-приложение для анализа текстовых отчётов студентов. Он реализует:

- Подсчёт статистики текста (абзацы, слова, символы),

- Проверку отчётов на антиплагиат (выставляется рандомно, для упрощения реализации)

- Генерацию облака слов.


## Проект построен по микросервисной архитектуре и включает следующие сервисы:

1. API Gateway — маршрутизация запросов. (Использовался [Kong](https://github.com/Kong/kong) в качестве маршрутизатора)

2. [File Storing Service](http://localhost:8000/api/files/swagger/index.html) —  Swagger для приём и хранение файлов. 

3. [File Analysis Service](http://localhost:8000/api/analyze/swagger/index.html) — Swagger для анализ текста и сравнение файлов.

4. PostgreSQL — отдельная БД для каждого сервиса.

---

#  Доступные endpoints
API Gateway (localhost:8000/api/files/)
| Метод  | Путь                     | Описание                          |
| ------ | ------------------------ | --------------------------------- |
| POST   | /api/files               | Загрузка файла                    |
| GET    | /api/files               | Получение всех загруженных файлов |
| GET    | /api/files/{id}          | Получение конкретного файла       |
| DELETE | /api/files/{id}          | Удаление конкретного файла.       |
| GET    | /api/files/{id}/metadata | Получение метаданных файла        |

API Gateway (localhost:8000/api/analyze/)
| Метод | Путь                            | Описание                                |
| ----- | ------------------------------- | --------------------------------------- |
| GET   | /api/analyze                    | Получение анализа конкретного файла     |
| GET   | /api/analyze/wordcloud/{fileId} | Получение облака слов конкретного файла*|

*работает после получения анализа файла (иначе будет пустой файл вместо облака слов).

Пример работы через curl:

```bash
curl -F "file=@{filename}.txt" http://localhost:8000/api/files

curl -i -X GET "http://localhost:8000/api/analyze?fileId={ID загруженного файла}}"
 
curl http://localhost:8000/api/analyze/wordcloud/{ID загруженного файла} --output output_wordcloud.png

```
---
# Тесты 
Тесты покрывают >65% программы находятся в папке "Tests".
---

# Запуск проекта через Docker

### Сборка и запуск
Зайдите в Docker Desktop. В корне проекта выполните:

```bash
docker-compose up --build 
```